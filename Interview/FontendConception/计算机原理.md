# 计算机原理

#### 1. 在浏览器输入 URL 回车之后发生了什么

1. URL 解析
2. DNS 查询
3. TCP 连接
4. 处理请求
5. 接受响应
6. 渲染页面



**1. URL解析**

**地址解析：**首先判断你输入的是一个合法的 URL 还是一个待搜索的关键词，并且根据你输入的内容进行自动完成、字符编码等操作。

强制客户使用HTTPS访问页面 ：**https**协议是由SSL+http协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。

**检查缓存**

![img](https://pic1.zhimg.com/80/v2-0489444034d569b37867e2e527a7d5d4_720w.jpg)



**2. DNS查询**



#### Cookie，localStorage，sessionStorage 的区别

cookie是在HTML4中使用的给客户端保存数据的，也可以和session配合实现跟踪浏览器用户身份；而webstorage（包括：localStorage和sessionStorage）是在HTML5提出来的，纯粹为了保存数据，不会与服务器端通信。WebStorage两个主要目标：（1）提供一种在cookie之外存储会话数据的路径。（2）提供一种存储大量可以跨会话存在的数据的机制。


**cookie** 如果不设置有效期，那么就是临时存储（存储在内存中），是会话级别的，会话结束后，cookie 也就失效了，如果设置了有效期，那么cookie 存储在硬盘里，有效期到了，就自动消失了

**localStorage** 的生命周期是永久的，关闭页面或浏览器之后localStorage****中的数据也不会消失。localStorage 除非主动删除数据，否则数据永远不会消失。

**sessionStorage** 仅在当前会话下有效。sessionStorage引入了一个“浏览器窗口”的概念，sessionStorage是在同源的窗口中始终存在的数据。只要这个浏览器窗口没有关闭，即使刷新页面或者进入同源另一个页面，数据依然存在。但是sessionStorage在关闭了浏览器窗口后就会被销毁。同时独立的打开同一个窗口同一个页面，sessionStorage也是不一样的。

                                        如果说把cookie的有效期设置为永远永远，永久，那么就是localStorage。
                                        cookie没有设置有效期，那么就是sessionStorage
**网络流量：cookie** 的数据每次都会发给服务器端，而localstorage 和sessionStorage 不会与服务器端通信，纯粹为了保存数据，所以，webstorage更加节约网络流量。

**大小限制：cookie**大小限制在4KB，非常小；localstorage和sessionStorage在5M

**安全性：**WebStorage不会随着HTTP header发送到服务器端，所以安全性相对于cookie来说比较高一些，不会担心截获.

**使用方便性上**：WebStorage提供了一些方法，数据操作比cookie方便；

                                           setItem (key, value) ——  保存数据，以键值对的方式储存信息。
                                           getItem (key) ——  获取数据，将键值传入，即可获取到对应的value值。
                                           removeItem (key) ——  删除单个数据，根据键值移除对应的信息。
                                           clear () ——  删除所有的数据
                                           key (index) —— 获取某个索引的key



#### **2. HTTP相关面试题**

#### HTTPS 与 HTTP

HTTP 主要内容分为三部分，**超文本（Hypertext）、传输（Transfer）、协议（Protocol）**。

 说到 HTTP，不得不提的就是 TCP/IP 网络模型，一般是五层模型。如下图所示

![img](https://pic4.zhimg.com/80/v2-a0eeeef2d69e44e1434c01f341660a0f_720w.jpg)

而 HTTPS 的全称是 `Hypertext Transfer Protocol Secure`，从名称我们可以看出 HTTPS 要比 HTTPS 多了 secure 安全性这个概念，实际上， HTTPS 并不是一个新的应用层协议，它其实就是 HTTP + TLS/SSL 协议组合而成，而安全性的保证正是 TLS/SSL 所做的工作。

![img](https://pic3.zhimg.com/80/v2-2295aa8205ce9d03782cf88e8548ec5e_720w.jpg)

- HTTPS 是安全的协议，它通过 **密钥交换算法 - 签名算法 - 对称加密算法 - 摘要算法** 能够解决上面这些问题。

![img](https://pic2.zhimg.com/80/v2-5a1586214de589e083e3828f6ba3083d_720w.jpg)

#### UDP 是什么


UDP 的全称是 `User Datagram Protocol`，用户数据报协议。它不需要所谓的`握手`操作，从而加快了通信速度，允许网络上的其他主机在接收方同意通信之前进行数据传输。

> 数据报是与分组交换网络关联的传输单元。



**UDP 的特点主要有**

- UDP 能够支持容忍数据包丢失的带宽密集型应用程序
- UDP 具有低延迟的特点
- UDP 能够发送大量的数据包
- UDP 能够允许 DNS 查找，DNS 是建立在 UDP 之上的应用层协议。



#### TCP 是什么


TCP 的全称是`Transmission Control Protocol` ，传输控制协议。它能够帮助你确定计算机连接到 Internet 以及它们之间的数据传输。通过三次握手来建立 TCP 连接，三次握手就是用来启动和确认 TCP 连接的过程。一旦连接建立后，就可以发送数据了，当数据传输完成后，会通过关闭虚拟电路来断开连接。


**TCP 的主要特点有**

- TCP 能够确保连接的建立和数据包的发送
- TCP 支持错误重传机制
- TCP 支持拥塞控制，能够在网络拥堵的情况下延迟发送
- TCP 能够提供错误校验和，甄别有害的数据包。



**TCP 和 UDP**

- TCP 是面向连接的协议 。 UDP 是无连接的协议
- TCP 在发送数据前先需要建立连接，然后再发送数据 。 UDP 无需建立连接就可以直接发送大量数据
- TCP 会按照特定顺序重新排列数据包 。 UDP 数据包没有固定顺序，所有数据包都相互独立
- TCP 传输的速度比较慢 。 UDP 的传输会更快
- TCP 的头部字节有 20 字节 。 UDP 的头部字节只需要 8 个字节
- TCP 是重量级的，在发送任何用户数据之前，TCP需要三次握手建立连接。 UDP 是轻量级的。没有跟踪连接，消息排序等。
- TCP 会进行错误校验，并能够进行错误恢复 。 UDP 也会错误检查，但会丢弃错误的数据包。
- TCP 有发送确认。 UDP 没有发送确认
- TCP 会使用握手协议，例如 SYN，SYN-ACK，ACK。 UDP无握手协议
- TCP 是可靠的，因为它可以确保将数据传送到路由器。 UDP 中不能保证将数据传送到目标。



**HTTP1.1**

- HTTP 1.1 使用了摘要算法来进行身份验证
- HTTP 1.1 默认使用长连接，长连接就是只需一次建立就可以传输多次数据，传输完成后，只需要一次切断连接即可。长连接的连接时长可以通过请求头中的 `keep-alive` 来设置
- HTTP 1.1 中新增加了 E-tag，If-Unmodified-Since, If-Match, If-None-Match 等缓存控制标头来控制缓存失效。
- HTTP 1.1 支持断点续传，通过使用请求头中的 `Range` 来实现。
- HTTP 1.1 使用了虚拟网络，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。

**HTTP 2.0**

HTTP 2.0 是 2015 年开发出来的标准，它主要做的改变如下

- `头部压缩`，由于 HTTP 1.1 经常会出现 **User-Agent、Cookie、Accept、Server、Range** 等字段可能会占用几百甚至几千字节，而 Body 却经常只有几十字节，所以导致头部偏重。HTTP 2.0 使用 `HPACK` 算法进行压缩。
- `二进制格式`，HTTP 2.0 使用了更加靠近 TCP/IP 的二进制格式，而抛弃了 ASCII 码，提升了解析效率
- `强化安全`，由于安全已经成为重中之重，所以 HTTP2.0 一般都跑在 HTTPS 上。
- `多路复用`，即每一个请求都是是用作连接共享。一个请求对应一个id，这样一个连接上可以有多个请求。

![img](https://pic1.zhimg.com/80/v2-9d2b8a7aeb58745b2273b33d8e921468_720w.jpg)

